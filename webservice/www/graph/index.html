<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Graph</title>

    <style>
        div:has(> div > canvas) {
            margin: 0 2%;
            display: flex;

            div {
                width: 100%;
            }
        }

        div:has(:where(#type-pie, #cost-by-format)) {
            height: 500px;
            width: 400px;
            margin: 0 2%;

            display: flex;
        }
    </style>
</head>

<body>
    <label>Group by
        <select name="group-by" id="group-by">
            <option value="Year">Year</option>
            <option value="Type">Type</option>
            <option value="Status">Status</option>
            <option value="View-count">View Count</option>
            <option value="Is-anime">Is Anime</option>
        </select>
    </label>
    <form action="javascript:treeFilterForm()" id="sidebar-form">
        <input type="text" name="search-query" id="search-query" placeholder="search query">
        <select name="sort-by" title="sort">
            <option value="">None</option>
            <option value="rating">Rating</option>
            <option value="general-rating">General rating</option>
            <option value="rating-disparity" title="How different your rating is from the general consensous">
                Rating disparity</option>
            <option value="release-year">Release year</option>
            <option value="cost">Cost</option>
        </select>
        <button type="button" popovertarget="advanced-search">Advanced</button>
        <dialog popover id="advanced-search">
            <div class="grid">
                <div class="flex row wrap">
                    <select name="format" multiple>
                        <option value="">NONE</option>
                        <option value="0">VHS</option>
                        <option value="1">CD</option>
                        <option value="2">DVD</option>
                        <option value="3">Blu Ray</option>
                        <option value="4">4k Blu Ray</option>
                        <option value="5">Manga</option>
                        <option value="6">Book</option>
                        <option value="7">Digital</option>
                        <option value="8">Board Game</option>
                        <option value="9">Steam</option>
                        <option value="10">Nintendo Switch</option>
                        <option value="11">Xbox One</option>
                        <option value="12">Xbox 360</option>
                        <option value="14">Vinyl</option>
                        <option value="13">Other</option>
                    </select>
                    <select name="status" multiple>
                        <option value="">NONE</option>
                        <option value="Viewing">Viewing</option>
                        <option value="Finished">Finished</option>
                        <option value="Dropped">Dropped</option>
                        <option value="Planned">Planned</option>
                        <option value="ReViewing">ReViewing</option>
                        <option value="Paused">Paused</option>
                    </select>
                    <select name="type" multiple>
                        <option value="">NONE</option>
                        <option value="Show">Show</option>
                        <option value="Movie">Movie</option>
                        <option value="MovieShort">Movie Short</option>
                        <option value="Manga">Manga</option>
                        <option value="Book">Book</option>
                        <option value="Game">Game</option>
                        <option value="Song">Song</option>
                        <option value="BoardGame">BoardGame</option>
                        <option value="Collection">Collection</option>
                    </select>
                    <div class="flex column">
                        <input type="text" name="tags" placeholder="tags (',' seperated)">
                        <input type="number" step="0.01" name="price-gt" placeholder="price ⬆">
                        <input type="number" step="0.01" name="price-lt" placeholder="price ⬇">
                        <input type="number" name="rating-gt" step="0.01" placeholder="rating ⬆">
                        <input type="number" name="rating-lt" step="0.01" placeholder="rating ⬇">
                    </div>
                </div>
                <button class="close" tabindex="0" type="button" popovertarget="advanced-search">X</button>
            </div>
        </dialog>
        <input type="submit" value="sort'n'search">
    </form>
    <div>
        <div>
            <canvas id="by-year"></canvas>
        </div>
        <div>
            <canvas id="rating-by-year"></canvas>
        </div>
    </div>

    <div>
        <div>
            <canvas id="watch-time-by-year"></canvas>
        </div>
        <div>
            <canvas id="adj-rating-by-year"></canvas>
        </div>
    </div>

    <div id="pies">
        <canvas id="type-pie"></canvas>
        <canvas id="cost-by-type"></canvas>
    </div>

    <div>
        <canvas id="count-by-format"></canvas>
        <canvas id="cost-by-format"></canvas>
    </div>

    <div>
        <canvas id="finished-per-year"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/js/globals.js"></script>
    <script src="/js/api.js"></script>
    <script src="/graph/index.js"></script>
</body>

</html>
